services:
  mongo4:
    container_name: mongo4
    image: mongo:4.4.6
    ports:
      - "27017:27017"
    restart: always
    networks:
      - mongo
  dart_unpub:
    build: .
    container_name: dart_unpub
#    restart: always
    networks:
      - mongo
    volumes:
      - ./data:/app/data
    ports:
      - 4000:4000
    links:
        - mongo4
    depends_on:
        - mongo4
    environment:
      DB_URL: mongodb://mongo4:27017/pub
      WAIT_HOSTS: mongo4:27017

networks:
    mongo:
      driver: bridge
#https://hub.docker.com/r/trevorwang/docker-unpub
#https://hub.docker.com/r/trevorwang/docker-unpub/builds
